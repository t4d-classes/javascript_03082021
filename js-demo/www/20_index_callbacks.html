<!DOCTYPE html>

<script>
  // using strict mode is a best practice
  "use strict"; // ES5 - 2011

  // setTimeout(function doIt() {
  //   console.log("a");
  // }, 0);

  // console.log("b");

  const delay = () => Math.floor(Math.random() * 1000) + 500;

  // setTimeout(function () {
  //     console.log("a");
  //     setTimeout(function () {
  //         console.log("b");
  //         setTimeout(function () {
  //             console.log("c");
  //         }, delay());
  //     }, delay());
  // }, delay());

  function allDone() {
    console.log("all done");
  }

  let counter = 0;

  counter++;
  setTimeout(() => {
    console.log("a");
    counter--;
    if (counter === 0) {
      allDone();
    }
  }, delay());

  counter++;
  setTimeout(() => {
    console.log("b");
    counter--;
    if (counter === 0) {
      allDone();
    }
  }, delay());

  counter++;
  setTimeout(() => {
    console.log("c");
    counter--;
    if (counter === 0) {
      allDone();
    }
  }, delay());

  // Lab Exercise
  // Run the all done function, after all three setTimeouts have executed.
  // Rules:
  // 1. All three calls to setTimeout must occur in the same task
  // 2. The delay values must all be random
  // 3. Promises may not be used.
</script>
